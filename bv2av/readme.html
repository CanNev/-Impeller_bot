<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>[杂物]Bilibili视频BV号与AV号的转换</title>
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
        
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        <style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        
        
    </head>
    <body class="vscode-light">
        <!--
 * @Author: your name
 * @Date: 2020-03-30 22:02:54
 * @LastEditTime: 2020-03-31 12:23:52
 * @LastEditors: Please set LastEditors
 * @Description: In User Settings Edit
 * @FilePath: /Impeller_bot/bv2av/readme.md
 -->
<h1 id="%e6%9d%82%e7%89%a9bilibili%e8%a7%86%e9%a2%91bv%e5%8f%b7%e4%b8%8eav%e5%8f%b7%e7%9a%84%e8%bd%ac%e6%8d%a2">[杂物]Bilibili视频BV号与AV号的转换</h1>
<h2 id="%e6%a6%82%e8%bf%b0">概述</h2>
<ul>
<li>某种意义上AV号时代的结束,</li>
<li>一个简易的BV转AV的程序,</li>
<li>由golang编写,</li>
<li>随便用,用完点个收藏,没问题的</li>
</ul>
<h2 id="%e6%a0%b8%e5%bf%83%e4%bb%a3%e7%a0%81">核心代码</h2>
<pre><code class="language-golong"><code><div>
package bv2av

import (
	&quot;math&quot;
	&quot;strconv&quot;
)

var table = &quot;fZodR9XQDSUm21yCkr6zBqiveYah8bt4xsWpHnJE7jL5VG3guMTKNPAwcF&quot;
var s = [6]int64{11, 10, 3, 8, 4, 6}

const xor int64 = 177451812
const add int64 = 8728348608

func Deb2a(x string) string {

	var r int64
	var av int64
	tr := make(map[int64]int64)
	i := 0
	for i = 0; i &lt; 58; i++ {
		tr[int64(table[i])] = int64(i)
	}

	for i = 0; i &lt; 6; i++ {
		r += tr[int64(x[s[i]])] * int64(math.Pow(float64(58), float64(i)))
	}
	av = (r - add) ^ xor
	return &quot;AV&quot; + strconv.FormatInt(av, 10)
    }

</div></code></code></pre>
<h2 id="%e5%8f%aa%e8%a8%80%e7%89%87%e8%af%ad">只言片语</h2>
<ul>
<li>现在已经加载到个人的QQbot&quot;Impeller叶轮&quot;上</li>
<li>支持两种查询指令,私信和群聊皆可以使用</li>
<li>苦于没有服务器,佛系上线</li>
</ul>

    </body>
    </html>